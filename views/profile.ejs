<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GapShap</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="login-page">
    <div class="form">
        <div class="form-line"></div>

        <div style="margin-top: 18px;">
            <img src="<%= userDetails.profilePicture %>" alt="<%= userDetails.username %>" />
            <div><%= userDetails.emailId %></div> <br>

            <% if(isUpdate === true) {%>
                <form action="/user/updateProfile" method="post" id="updateProfile">
                    <input type="hidden" name="emailId" value="<%= userDetails.emailId %>"/>
                    New Username <input type="text" name="username" placeholder="<%= userDetails.username %>"/>
                    New Password <input type="password" name="password" placeholder="Password"/>
                    New Status <input type="text" name="profileStatus" placeholder="<%= userDetails.profileStatus %>"/>
                    <button type="submit">Update Profile</button>
                </form>
            <% } else {%>
                    <div class="about">
                        <div class="name"><%= userDetails.username %></div>
                        <div><%= userDetails.emailId %></div>
                        <div><%= userDetails.profileStatus %></div>
                    </div>
            <% } %>
        </div>
    </div> <!-- end form -->
</div> <!-- end login container -->
<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>

<script>
    $(function() {
        $('#updateProfile').submit(function() {
            $(this).find(":input").filter(function(){ return !this.value; }).attr("disabled", "disabled");
            return true; // ensure form still submits
        });
    });
</script>